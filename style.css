:root{
  --bg: #f5f8fb;
  --card: #ffffff;
  --accent: #111111; /* neutral/black for thermal paper */
  --accent-2: #3a3a3a; /* dark gray secondary */
  --muted: #1b1c1f;
  --success: #1e9b4a;
  --danger: #b30000;
}

body {
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: var(--bg);
  color: #111827;
  padding: 28px 16px;
}

.container {
  max-width: 460px;
  margin: 18px auto;
  background: var(--card);
  padding: 18px;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(16,24,40,0.06);
  border: 1px solid rgba(15,23,42,0.04);
}

.brand{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.logo{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
.title{margin:0;font-size:1.15rem;color:var(--accent)}
.biz .muted{display:block;color:var(--muted);font-size:0.85rem}

.fields{margin-top:6px}
.field{display:flex;flex-direction:column;margin-bottom:12px}
.field.small{max-width:160px}
.field label{font-size:0.85rem;color:var(--muted);margin-bottom:6px}

input, textarea, select{
  width:100%;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid #e6e9ee;
  background:#fbfcfe;
  font-size:0.95rem;
  transition: border-color .12s, box-shadow .12s, background .12s;
}

input:focus, textarea:focus, select:focus{outline:none;box-shadow:0 8px 20px rgba(0,0,0,0.06);border-color:var(--accent);background:#fff}

textarea{min-height:86px;resize:vertical}

.row{display:flex;gap:8px;align-items:center}

/* Linha de cliente: sem sublinhado, exibir valor normalmente */
.row-line{display:flex;align-items:center;gap:8px;margin:6px 0}
.row-line strong{flex:0 0 auto}
.row-line .line-fill{flex:1;display:block;padding:6px 6px;min-height:18px}
.row-line .line-right{flex:0 0 auto;margin-left:8px}

.actions{display:flex;gap:8px;align-items:center}
.btn{padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
.btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;box-shadow:0 8px 20px rgba(0,0,0,0.08)}
.btn-primary:hover{transform:translateY(-1px)}
.btn-secondary{background:transparent;border:1px solid #e6e9ee;color:var(--accent)}

.muted{color:var(--muted);font-size:0.9rem}
 #printStatus{margin-top:8px;font-size:0.95rem}
.print-success{color:var(--success);font-weight:700}
.print-error{color:var(--danger);font-weight:700}

/* Ordem de serviço (visual para tela e impressão) */
.copy-label{display:block;text-align:center;background:transparent;color:var(--accent);padding:0;margin:0 0 8px 0;border-radius:0;font-weight:700}
.os{
  width:320px;
  margin: 18px auto;
  background: #fff;
  padding:12px 14px;
  border-radius:8px;
  box-shadow: 0 6px 18px rgba(10,10,10,0.04);
  border:1px solid rgba(10,10,10,0.03);
  font-size:0.95rem;
}
.os h3{margin:0 0 8px;font-size:1rem;color:var(--accent);text-align:center}
.os p{margin:6px 0; display:flex; justify-content:space-between; align-items:center}
.os p.center{display:block;text-align:center}
.os p strong{display:inline-block;width:110px;vertical-align:top}
.os p span{flex:1;text-align:right}
.customer-contact{display:none;text-align:center;font-weight:700;margin-top:8px;color:var(--muted)}
/* rodapé impresso (pequeno, centralizado) */
.print-footer{display:none;text-align:center;font-weight:700;margin-top:8px;color:var(--muted);font-size:0.95rem}
.os .previsao{font-weight:700;color:var(--muted);margin-top:4px}
.os .center{margin-top:10px}
.cut-line{border:none;border-top:1px dashed rgba(0,0,0,0.18);margin:12px 0}

/* Termos e Condições (visual) */
.terms{
  background: linear-gradient(180deg, #fff, #fbfcfe);
  border: 1px solid rgba(15,23,42,0.04);
  padding: 10px 12px;
  border-radius: 8px;
  font-size: 0.86rem;
  line-height: 1.35;
  color: #111827;
  max-height: 120px;
  overflow-y: auto;
  box-shadow: 0 6px 18px rgba(10,10,10,0.03);
  margin-top: 8px;
}
.terms h4{margin:0 0 6px;font-size:0.95rem;color:var(--accent)}
.terms ol{padding-left:1.05rem;margin:0}
.terms li{margin-bottom:6px}
.terms small.muted{display:block;margin-top:8px;font-size:0.8rem;color:var(--muted)}

 /* specific paper sizes — width affects preview and print dimensions */
.os.paper-a4 { width: 210mm; }
.os.paper-lt { width: 8.5in; }
.os.paper-postcard { width: 100mm; }
.os.paper-roll-58-297 { width: 58mm; }
.os.paper-roll-58-3276 { width: 58mm; }
.os.paper-roll-80-297 { width: 80mm; }
.os.paper-roll-80-3276 { width: 80mm; }

@media print {
  /* ensure printed size follows the selected size when possible */
  .os { box-shadow:none; border:none; margin:0; }
  .os.paper-a4 { width: 210mm; }
  .os.paper-lt { width: 8.5in; }
  .os.paper-postcard { width: 100mm; }
  .os.paper-roll-58-297, .os.paper-roll-58-3276 { width: 58mm; }
  .os.paper-roll-80-297, .os.paper-roll-80-3276 { width: 80mm; }
  /* Make terms show fully when printing */
  .terms { max-height: none; overflow: visible; }
}

/* ===== IMPRESSÃO ===== */
@media print {
  body { background: none; }
  .no-print { display: none; }
  .os { width: 100%; margin: 0; box-shadow:none; border:none; }
  .copy-label{page-break-after: avoid}
  .cut-line{display:block;margin:10px 0}
} 


.center {
   text-align: center ;
   }

/* ===== IMPRESSÃO ===== */
@media print {
  body {
    background: none;
  }

  .no-print {
    display: none;
 }

 .os {
    width: 100%;
    margin: 0;
  }
}

/* ===== TELA DE IMPRESSÃO (OVERLAY) ===== */
.print-overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(3,7,18,0.45); z-index: 1200; }
.print-overlay[aria-hidden="false"] { display: flex; }
.overlay-card { width: 420px; max-width: 92%; background: var(--card); border-radius: 12px; padding: 14px; box-shadow: 0 20px 60px rgba(10,10,10,0.35); border: 1px solid rgba(15,23,42,0.06); }
.overlay-header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px }
.overlay-header strong{font-size:1rem;color:var(--accent)}
.btn-close{font-size:1.2rem;padding:6px 8px;min-width:36px}
.overlay-body{padding:6px 0}
.overlay-steps{display:flex;gap:8px;margin-bottom:12px}
.step{flex:1;background:#f6f9fc;padding:8px;border-radius:8px;display:flex;align-items:center;justify-content:space-between}
.step[data-step="1"].done{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff}
.step[data-step="2"].active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff}
.step .step-label{font-weight:700;font-size:0.9rem}
.step .step-icon{font-weight:900}
#overlayMessage{margin-bottom:10px}
.overlay-row{display:flex;align-items:center;gap:8px;margin-bottom:10px}
/* Spinner */
.spinner{display:none;width:20px;height:20px;border-radius:50%;border:3px solid rgba(0,0,0,0.08);border-top-color:var(--accent);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.preview{border-radius:8px;border:1px solid rgba(15,23,42,0.04);padding:8px;background:#fbfcfe}
.preview img{width:100%;height:auto;display:block;border-radius:6px;border:1px solid rgba(0,0,0,0.06)}
.preview-mini{padding:14px;text-align:center;color:var(--muted)}
.preview[aria-hidden="true"] img{display:none}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.overlay-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
@media (max-width:520px){ .overlay-card{padding:12px} .overlay-steps{flex-direction:column} }

 /* Mensagens de status de impressão */
#printStatus {
  font-size: 0.95rem;
}
.print-success {
  color: green;
  font-weight: bold;
}
.print-error {
  color: #b30000;
  font-weight: bold;
}

 /* Regras específicas para papel térmico: força impressão para 80mm (área imprimível 72.1mm) x 297mm */
 @page {
  margin: 0;
  padding: 0;
}

 @media print {
   /* garantir que a ordem de serviço ocupe a área imprimível do papel térmico */
   .os {
      width: 100% !important;
      margin: 0 !important;
      font-size: 16px !important;
      /* PASSO 2 da solução: Criar margem interna segura com padding, em milímetros */
      padding-top: 2mm !important;
      padding-bottom: 2mm !important;
      padding-left: 6mm !important;
      padding-right: 4mm !important;
      box-sizing: border-box !important; /* Garante que o padding não estoure a largura */
   }
  body { width: 100% !important; margin: 0 !important; padding: 0 !important; }
  /* remover elementos que não devem aparecer na impressão */
   .no-print { display: none !important; }
/* aumentar significativamente para ocupar a largura correta */
  body, .os { line-height: 1.3 !important; }

  /* PASSO 1 da solução: Desativar flex na impressão para evitar cortes */
  .os p {
    display: block !important;
    text-align: left !important;
    font-size: 16px !important;
    margin: 3px 0 !important;
    padding: 0 !important; /* Padding individual dos <p> é zerado pois o container .os já tem */
  }
  .os p strong,
  .os p span {
    display: inline !important;
    width: auto !important;
    text-align: left !important; /* Garante que o span não tente se alinhar à direita */
    font-size: 16px !important;
  }

  /* --- Reset e ajustes finos para consistência --- */
  .os h3 { font-size: 1.3rem !important; margin: 3px 0 6px 0 !important; padding: 0; text-align: center; }
  .os strong { font-size: 16px !important; font-weight: bold; }
  .os #osNota { display: block !important; margin: 4px 0 !important; padding: 4px 0 !important; font-size: 14px !important; }
  .os #osNota span { word-wrap: break-word; font-size: 14px !important; }
  .paper-note { display: none; }
  .terms { font-size: 13px !important; line-height: 1.2 !important; padding: 4px 0 !important; margin: 4px 0 !important; }
  .terms ol { padding-left: 16px !important; }
  .terms li { margin: 1px 0 !important; }
  /* remover zoom para usar tamanho real da página */
  body { zoom: 100% !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .cut-line { margin: 4px 0 !important; }
  .center { margin: 6px 0 !important; text-align: center !important; }
  /* mostrar rodapé impresso e ajustar tamanho */
  .print-footer { display: block !important; font-size: 16px !important; margin-top: 6px !important; }
 }

/* Mostrar apenas a via selecionada quando imprimindo via programática */
body.printing-estabelecimento .os-cliente { display: none !important; }
body.printing-cliente .os-estabelecimento { display: none !important; }

/* Correção final para centralizar elementos com a classe .center na impressão */
@media print {
  p.center {
    text-align: center !important;
  }
}





.brand{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.history-toggle{margin-left:auto;font-size:0.82rem;padding:8px 10px;border-radius:999px;background:#f7f9fc;border:1px solid #d9e1ea;color:#0f172a}
.history-toggle:hover{background:#eef3f8}
.history-toggle[aria-expanded="true"]{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;border-color:transparent}

.history {
  margin-top: 14px;
  border: 1px solid #e5ebf2;
  border-radius: 12px;
  padding: 12px;
  background: linear-gradient(180deg, #ffffff, #f8fbff);
}
.history-header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:10px}
.history-actions{display:flex;align-items:center;gap:8px;flex-wrap:wrap;justify-content:flex-end}
.history-search{
  display:flex;
  align-items:center;
  gap:6px;
  border:1px solid #d7e0ea;
  background:#fff;
  border-radius:999px;
  padding:6px 10px;
  min-width:220px;
}
.history-search input{
  border:none;
  background:transparent;
  padding:0;
  box-shadow:none;
}
.history-search input:focus{outline:none;box-shadow:none;border:none}
.history h3 { margin: 0; font-size: 0.98rem; color:#0f172a; }
.history-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
.history-col {border:1px solid #e5ebf2;border-radius:10px;padding:10px;background:#fff;box-shadow:0 6px 16px rgba(15,23,42,0.04)}
.history-col-head{display:flex;align-items:center;justify-content:space-between;gap:8px}
.history-col h4 { margin: 0; font-size: 0.9rem; color:#1e293b; }
.history-box {
  margin-top: 8px;
  background: #f8fbff;
  border: 1px solid #d7e3f1;
  border-radius: 8px;
  padding: 10px;
  max-height: 300px;
  overflow: auto;
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  font-size: 0.9rem;
  line-height: 1.4;
  color:#0f172a;
  display: grid;
  gap: 8px;
}

.history-entry{
  border: 1px solid #d8e2ee;
  background: #ffffff;
  border-radius: 10px;
  padding: 10px 12px;
  box-shadow: 0 3px 10px rgba(15,23,42,0.06);
}

.history-entry p{
  margin: 0 0 6px;
}

.history-entry p:last-child{
  margin-bottom: 0;
}

.history-entry strong{
  color: #1e293b;
}

.history-empty{
  margin: 0;
  color: #475569;
}
@media (min-width: 860px){
  .history-grid{grid-template-columns:1fr 1fr}
}

.history-page{
  max-width: 980px;
  margin: 20px auto;
  padding: 0 14px 20px;
}
.history-page-header h1{
  margin: 0 0 6px;
  font-size: 1.3rem;
  color: var(--accent);
}
.history-page-header .muted{
  margin: 0 0 12px;
}

.history-tabs{display:flex;gap:8px;margin-bottom:10px}
.tab-btn{
  border:1px solid #d7e0ea;
  background:#f8fafc;
  color:#334155;
  padding:8px 12px;
  border-radius:999px;
  cursor:pointer;
  font-weight:600;
}
.tab-btn.active{
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:#fff;
  border-color:transparent;
}
.tab-panel[hidden]{display:none}

.history-toggle{
  border: 2px solid #c7d3e2;
  background: #ffffff;
  box-shadow: 0 6px 16px rgba(15,23,42,0.08);
  font-weight: 700;
}

.history-cta{
  width: 100%;
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  border: 2px solid #d0def0;
  background: linear-gradient(180deg, #ffffff, #f0f7ff);
  border-radius: 12px;
  padding: 12px;
  cursor: pointer;
  text-align: left;
  box-shadow: 0 10px 22px rgba(17,24,39,0.08);
}
.history-cta:hover{
  transform: translateY(-1px);
  border-color: #9eb9da;
}
.history-cta-icon{font-size:1.2rem}
.history-cta-text strong{display:block;color:#0f172a;font-size:0.96rem}
.history-cta-text small{display:block;color:#475569;font-size:0.82rem;margin-top:2px}
.history-cta-arrow{margin-left:auto;font-size:1.05rem;color:#1e293b}
